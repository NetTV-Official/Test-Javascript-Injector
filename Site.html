<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GitHub JSON Security Test</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    pre { background: #f4f4f4; padding: 10px; }
    button { padding: 10px; }
  </style>
</head>
<body>

<h1>GitHub Pages JSON Security Test</h1>

<button onclick="loadData()">Fetch JSON</button>

<h2>Raw JSON</h2>
<pre id="raw"></pre>

<h2>Parsed & Validated</h2>
<pre id="parsed"></pre>

<script>
async function loadData() {
  const url = "https://nettv-official.github.io/Test-Javascript-Injector/data/user.json";

  try {
    const response = await fetch(url, {
      method: "GET",
      headers: {
        "Accept": "application/json"
      }
    });

    // Basic security check
    if (!response.ok) {
      throw new Error("HTTP error " + response.status);
    }

    const text = await response.text();
    document.getElementById("raw").textContent = text;

    // Parse JSON
    const data = JSON.parse(text);

    // Validate structure (important for security)
    if (
      typeof data.id !== "number" ||
      typeof data.name !== "string" ||
      typeof data.active !== "boolean"
    ) {
      throw new Error("Invalid JSON structure");
    }

    // Safe stringify for output
    document.getElementById("parsed").textContent =
      JSON.stringify(data, null, 2);

  } catch (err) {
    document.getElementById("parsed").textContent =
      "ERROR: " + err.message;
  }
}
</script>

</body>
</html>

</html>
